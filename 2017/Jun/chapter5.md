# 避开客户端控件
客户端限制用户输入两方面：
- 通过客户端组件
- 通过对客户端执行保护措施

## 通过客户端传送数据

### 隐藏表单字段

使用拦截代理服务器

### HTTP cookie

### URL参数

### Referer消息头

### 模糊数据

通过客户端传送的模糊数据实施攻击：
- 破译模糊算法
- 提交任意有效载荷、获取所需要的字符串
- 如果无法破解模糊算法，可以寻找相同的地方进行复制
- 提供畸形字符串，对模糊数据进行解密或去模糊处理的服务器端逻辑

### ASP.NET viewState

一种通过客户端传送模糊数据的常用机制

## 收集用户数据：HTML表单

### 长度限制

### 基于脚本的确认

### 禁用的元素

## 手机用户数据：浏览器扩展

### 常见的浏览器扩展技术

- java applet
- Flash
- silverlight

提供的安全功能：

- 编译成中间字节码
- 提供沙盒执行环境的虚拟机中运行
- 使用远程框架，传输复杂数据结构

### 攻击浏览器扩展的方法

1. 拦截并修改浏览器扩展组件提出的请求及服务器相应
2. 直接攻击组件

### 拦截浏览器扩展的流量

1. 处理序列化数据

- java序列化
格式：Content-type： application/x-java-serialized-object
使用burp suite的Dser插件
- Flash序列化
格式：Content-type： application/x-amf
- Silverlight序列化
格式：Content-type： application/soap+msbin1

2. 拦截浏览器扩展流量时遇到的障碍

出现无法拦截流量时：
- 客户端组件具有指定的代理配置，通过修改计算基的hosts文件以实现拦截目的，同时将代理服务器配置未支持匿名代理，并自动重定向到正确的目标主机；
- 客户端组件可能不接受拦截代理服务器提供的SSL证书，可以将代理服务器配置为使用一个主CA证书，并在计算基的可信证书库中安装该CA证书，从而解决这个问题
- 客户端使用出HTTP以外的协议进行通信，可以使用Echo Mirage工具

### 反编译浏览器扩展

最彻底的方法

主要工作流程：
1. 下载字节码
相关的扩展：
2. 反编译组件
- flash
Flasm、Flare SWFScan
- Silverlight
.NET Reflector
3. 分析源代码

对代码进行分析：
- 寻找输入确认或其他安全相关逻辑和事件
- 在向服务器传送数据之前用于包装用户提交的数据的模糊或加密程序
- 在用户界面中不可见，但可以通过修改组件进行解锁的隐藏的客户端功能
- 对以前未通过解析应用程序确定的服务器端功能的引用

4. 字节码模糊处理

5. java applet: 可用示例

### 附加调试器

JavaSnoop、 JSwat

### 本地客户端组件

应用程序可能需要的操作系统功能：
- 验证用户是否安装最新的病毒扫描器
- 验证代理服务器设置及其他企业配置是够有效
- 集成智能卡读取器

## 安全处理客户端数据

### 通过客户端传送数据

### 确认客户端生成的数据

### 日志和警报




